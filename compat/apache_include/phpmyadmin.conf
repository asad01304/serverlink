# This snippet is intended to be included from domain.tld VirtualHost
# blocks. These redirects configure comfortable environment for the
# end-user to access his/her MySQL configurator.
#
# To include this snippet use "Use phpMyAdmin <VHost_Server_Root>"
# inside VirtualHost block.

<IfModule mod_macro.c>
<Macro phpMyAdmin $ServerRoot $SecureToken>
RewriteEngine on
# handle images, scripts, and css
#RewriteRule     ^/+-ctl(/+[^/]+)*/+phpmyadmin/+(favicon\.ico|themes/+([^/]+/+img/+.*))$ /home/clients/websites/w_/public_html/phpmyadmin/current/$2 [L]
RewriteRule     ^/+-ctl(/+[^/]+)*/+phpmyadmin/+(.+\.(css|gif|jpg|ico|js|png))$ /home/clients/websites/w_/public_html/phpmyadmin/current/$2 [L]

# password protected interface
ScriptAlias /-ctl/phpmyadmin /home/clients/websites/w_/public_html/cgi/phpmyadmin.cgi
<Location /-ctl/phpmyadmin>
        AuthType Basic
        AuthName "phpMyAdmin (MySQL Administrator) wrapper"
        AuthUserFile $ServerRoot/.webenabled/private/.htpasswd.phpmyadmin
        Require valid-user
        Satisfy All
</Location>

# WE private interface
ScriptAlias "/-ctl/$SecureToken/phpmyadmin" /home/clients/websites/w_/public_html/cgi/phpmyadmin.cgi
</Macro>
</IfModule>
